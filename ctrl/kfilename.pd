#N canvas 1920 30 2880 1588 10;
#X obj 182 173 outlet;
#X obj 182 125 inlet;
#X text 346 74 kfilename - abstraction for shorter filenames.;
#N canvas 0 0 2880 1588 unabbreviate 1;
#X obj 164 43 inlet;
#X obj 491 45 loadbang;
#X obj 510 230 s kfilename-abbreviations-sender;
#X obj 510 255 r \$0-kfilename-abbreviations;
#X obj 510 184 f \$0;
#X msg 510 207 \$1-kfilename-abbreviations;
#X obj 510 278 list-drip;
#X msg 510 301 add2 \$1;
#X obj 510 357 count 2;
#X obj 510 324 t b a;
#X obj 550 381 pack f s;
#X obj 550 404 route 0 1;
#X obj 164 242 list-find;
#X obj 164 66 route bang list;
#X obj 164 173 list split 1;
#X obj 164 338 list store;
#X obj 215 220 list store;
#X msg 530 106 ~;
#X msg 550 427 append \$1;
#X msg 575 450 append \$1;
#X text 235 336 list of unabbreviated directories;
#X obj 215 265 sel 0;
#X obj 164 409 list store;
#X obj 215 287 any;
#X obj 164 361 list prepend prepend;
#X obj 164 384 list trim;
#X text 518 19 generate the list of abbreviations;
#X text 289 218 list of abbreviations;
#X obj 145 220 t b a a;
#X obj 164 454 outlet;
#X obj 491 68 t b b b;
#X msg 164 312 get \$1;
#X obj 559 106 getenv HOME;
#X obj 164 151 file split;
#X obj 164 431 file join;
#X obj 164 129 symbol;
#X text 600 147 FIX: use [text] to hold the list of abbreviations?;
#X text 600 168 FIX: [file join] seems to escape already-escaped stuff... this causes issues with filenames that have spaces;
#X obj 207 101 list2symbol;
#X connect 0 0 13 0;
#X connect 1 0 30 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 7 0;
#X connect 6 1 15 0;
#X connect 6 1 16 0;
#X connect 7 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 11 0 18 0;
#X connect 11 1 19 0;
#X connect 12 0 31 0;
#X connect 12 1 21 0;
#X connect 13 0 35 0;
#X connect 13 1 38 0;
#X connect 13 2 38 0;
#X connect 14 0 28 0;
#X connect 14 1 22 1;
#X connect 15 0 24 0;
#X connect 16 0 12 1;
#X connect 17 0 16 1;
#X connect 18 0 15 0;
#X connect 19 0 16 0;
#X connect 21 0 23 0;
#X connect 22 0 34 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 22 0;
#X connect 28 0 22 0;
#X connect 28 1 12 0;
#X connect 28 2 23 1;
#X connect 30 0 16 0;
#X connect 30 0 15 0;
#X connect 30 1 4 0;
#X connect 30 2 17 0;
#X connect 30 2 32 0;
#X connect 31 0 15 0;
#X connect 32 0 15 1;
#X connect 33 0 14 0;
#X connect 34 0 29 0;
#X connect 35 0 33 0;
#X connect 38 0 35 0;
#X restore 182 149 pd unabbreviate;
#X text 345 104 Given an input like "~/foo" it will expand ~ into your home directory path. i.e. if your username is "blah" \, it will expand to "/home/blah/foo" on linux or "/Users/blah/foo" on macos.;
#X text 347 174 It's also possible to add additional abbreviations by responding to messages sent to "kfilename-abbreviations-sender" by sending to the receiver specified by the message a list of alternating abbreviations and what they should be unabbreviated to. The first path component of the input will be unabbreviated.;
#X text 349 278 For example \, if "kfilename-abbreviations-sender" receives a message like "foobar" it could send a message to "foobar" consisting of a list like "~s /home/blah/sounds ~d /home/blah/sounds/drums". Then when kfilename gets an input like "~d/blah.wav" to its inlet \, it will output "/home/blah/sounds/drums/blah.wav".;
#X text 352 396 BUG: Input paths that end with a / will result in a 0 at the end of the output filename. This is because zexy/symbol2list outputs 0 for empty list elements. (FIX);
#X connect 1 0 3 0;
#X connect 3 0 0 0;
